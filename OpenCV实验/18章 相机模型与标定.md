2020-9-25

# 学习openCV 3

## 射影几何基础

### 射影变换：

将物理世界中坐标为 (Xi, Yi, Zi) 的一系列**物理点Qi** 映射到**投影平面**上坐标为 (xi, yi) 的点的过程。

### 齐次坐标：

是：给定欧氏平面上的一点(*x*,*y*)，对任意非零实数 Z，三元组(*xZ*,*yZ*,*Z*)即称之为该点的齐次坐标。依据定义，将齐次坐标内的数值乘上同一个非零实数，可得到同一点的另一组齐次坐标。例如，笛卡儿坐标上的点 (1,2) 在齐次坐标中即可标示成 (1,2,1) 或 (2,4,2)。原来的笛卡儿坐标可透过将前两个数值除以第三个数值取回。因此，与笛卡儿坐标不同，一个点可以有无限多个齐次坐标表示法。

齐次坐标把**维数为n**的**投影空间**上的点用(n + 1) 维向量表示 (例如x, y, z 变为x, y, z, w) ，其额外限制是任意两个点的值成比例时即为等价点。

这里，图像平面是一个二维投影空间，因此可以利用一个三维向量 q=(q1,q2,q3) 来表示该平面上的点。由于所有点在投影空间中的比例值相同，因此我们可以通过除以q3得到实际的像素坐标值。

### 相机的内参矩阵：

将定义相机的参数(如fx, fy, cx和cy ) 重新排列为一个3 x 3 的矩阵

将物理世界中的点投影到相机上，可用下列简单的形式表示：

$ \vec{q} = M \cdot \vec{Q}$
$$
\vec{q}= \begin{bmatrix}x\\y\\w \end{bmatrix}\\
M=\begin {bmatrix} f_x & 0 & c_x \\ 0 & f_y & c_y \\ 0 & 0 & 1 \end{bmatrix} \\
\vec{Q}=\begin{bmatrix}X\\Y\\W \end{bmatrix}\\
$$
将乘数提取出来，可以发现 w=Z，并且是用齐次坐标表示的，可除以w 得到实际像素坐标值

### cv::convertPointsToHomogeneous() 

功能：转换成齐次坐标

需要一个N维点的向量(用一般形式表示) ，并且从该向量中构造出(N + 1)
维点的向量。所有新构造的向量所添加的维度值设置为1 。结果为:$\vec{dst_1}=(src_{i,0}\; src_{i,1}\; src_{i,N-1}\; 1)$

### cv::convertPointsFromHomogeneous







